async function loadRapier(){return window.RAPIER_GLOBAL.initPromise||(window.RAPIER_GLOBAL.initPromise=new Promise((async(i,R)=>{try{if(console.log("Загрузчик Rapier: начало инициализации..."),"undefined"!=typeof RAPIER){if(console.log("Загрузчик Rapier: обнаружен глобальный объект RAPIER"),"function"!=typeof RAPIER.init||RAPIER._initialized)return console.log("Загрузчик Rapier: RAPIER уже инициализирован или не требует инициализации"),RAPIER._initialized=!0,window.RAPIER_GLOBAL.initialized=!0,window.RAPIER_GLOBAL.instance=RAPIER,void i(RAPIER);console.log("Загрузчик Rapier: инициализируем RAPIER.init()");try{await RAPIER.init(),RAPIER._initialized=!0,window.RAPIER_GLOBAL.initialized=!0,window.RAPIER_GLOBAL.instance=RAPIER,console.log("Загрузчик Rapier: RAPIER успешно инициализирован"),i(RAPIER)}catch(i){console.error("Загрузчик Rapier: ошибка при инициализации:",i),R(i)}return}console.log("Загрузчик Rapier: RAPIER не найден, ожидаем его загрузки...");const n=1e4,e=Date.now(),o=()=>{if(Date.now()-e>n){const i=new Error(`Загрузчик Rapier: превышено время ожидания загрузки RAPIER (${n}ms)`);return console.error(i),void R(i)}if("undefined"!=typeof RAPIER)return console.log("Загрузчик Rapier: RAPIER появился"),void("function"!=typeof RAPIER.init||RAPIER._initialized?(console.log("Загрузчик Rapier: RAPIER готов"),RAPIER._initialized=!0,window.RAPIER_GLOBAL.initialized=!0,window.RAPIER_GLOBAL.instance=RAPIER,i(RAPIER)):RAPIER.init().then((()=>{console.log("Загрузчик Rapier: RAPIER успешно инициализирован"),RAPIER._initialized=!0,window.RAPIER_GLOBAL.initialized=!0,window.RAPIER_GLOBAL.instance=RAPIER,i(RAPIER)})).catch((i=>{console.error("Загрузчик Rapier: ошибка при инициализации:",i),R(i)})));setTimeout(o,100)};o()}catch(i){console.error("Загрузчик Rapier: неожиданная ошибка:",i),R(i)}}))),window.RAPIER_GLOBAL.initPromise}function getRapier(){return window.RAPIER_GLOBAL.instance}function isRapierReady(){return window.RAPIER_GLOBAL.initialized&&null!==window.RAPIER_GLOBAL.instance}window.RAPIER_GLOBAL={initialized:!1,instance:null,initPromise:null},window.RAPIER_LOADER={loadRapier,getRapier,isRapierReady};