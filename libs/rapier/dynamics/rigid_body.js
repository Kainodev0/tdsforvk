import{RotationOps,VectorOps}from"../math";import{SdpMatrix3Ops}from"../math";export var RigidBodyType;!function(t){t[t.Dynamic=0]="Dynamic",t[t.Fixed=1]="Fixed",t[t.KinematicPositionBased=2]="KinematicPositionBased",t[t.KinematicVelocityBased=3]="KinematicVelocityBased"}(RigidBodyType||(RigidBodyType={}));export class RigidBody{constructor(t,e,i){this.rawSet=t,this.colliderSet=e,this.handle=i}finalizeDeserialization(t){this.colliderSet=t}isValid(){return this.rawSet.contains(this.handle)}lockTranslations(t,e){return this.rawSet.rbLockTranslations(this.handle,t,e)}lockRotations(t,e){return this.rawSet.rbLockRotations(this.handle,t,e)}setEnabledTranslations(t,e,i,r){return this.rawSet.rbSetEnabledTranslations(this.handle,t,e,i,r)}restrictTranslations(t,e,i,r){this.setEnabledTranslations(t,e,i,r)}setEnabledRotations(t,e,i,r){return this.rawSet.rbSetEnabledRotations(this.handle,t,e,i,r)}restrictRotations(t,e,i,r){this.setEnabledRotations(t,e,i,r)}dominanceGroup(){return this.rawSet.rbDominanceGroup(this.handle)}setDominanceGroup(t){this.rawSet.rbSetDominanceGroup(this.handle,t)}additionalSolverIterations(){return this.rawSet.rbAdditionalSolverIterations(this.handle)}setAdditionalSolverIterations(t){this.rawSet.rbSetAdditionalSolverIterations(this.handle,t)}enableCcd(t){this.rawSet.rbEnableCcd(this.handle,t)}setSoftCcdPrediction(t){this.rawSet.rbSetSoftCcdPrediction(this.handle,t)}softCcdPrediction(){return this.rawSet.rbSoftCcdPrediction(this.handle)}translation(){let t=this.rawSet.rbTranslation(this.handle);return VectorOps.fromRaw(t)}rotation(){let t=this.rawSet.rbRotation(this.handle);return RotationOps.fromRaw(t)}nextTranslation(){let t=this.rawSet.rbNextTranslation(this.handle);return VectorOps.fromRaw(t)}nextRotation(){let t=this.rawSet.rbNextRotation(this.handle);return RotationOps.fromRaw(t)}setTranslation(t,e){this.rawSet.rbSetTranslation(this.handle,t.x,t.y,t.z,e)}setLinvel(t,e){let i=VectorOps.intoRaw(t);this.rawSet.rbSetLinvel(this.handle,i,e),i.free()}gravityScale(){return this.rawSet.rbGravityScale(this.handle)}setGravityScale(t,e){this.rawSet.rbSetGravityScale(this.handle,t,e)}setRotation(t,e){this.rawSet.rbSetRotation(this.handle,t.x,t.y,t.z,t.w,e)}setAngvel(t,e){let i=VectorOps.intoRaw(t);this.rawSet.rbSetAngvel(this.handle,i,e),i.free()}setNextKinematicTranslation(t){this.rawSet.rbSetNextKinematicTranslation(this.handle,t.x,t.y,t.z)}setNextKinematicRotation(t){this.rawSet.rbSetNextKinematicRotation(this.handle,t.x,t.y,t.z,t.w)}linvel(){return VectorOps.fromRaw(this.rawSet.rbLinvel(this.handle))}angvel(){return VectorOps.fromRaw(this.rawSet.rbAngvel(this.handle))}mass(){return this.rawSet.rbMass(this.handle)}effectiveInvMass(){return VectorOps.fromRaw(this.rawSet.rbEffectiveInvMass(this.handle))}invMass(){return this.rawSet.rbInvMass(this.handle)}localCom(){return VectorOps.fromRaw(this.rawSet.rbLocalCom(this.handle))}worldCom(){return VectorOps.fromRaw(this.rawSet.rbWorldCom(this.handle))}invPrincipalInertiaSqrt(){return VectorOps.fromRaw(this.rawSet.rbInvPrincipalInertiaSqrt(this.handle))}principalInertia(){return VectorOps.fromRaw(this.rawSet.rbPrincipalInertia(this.handle))}principalInertiaLocalFrame(){return RotationOps.fromRaw(this.rawSet.rbPrincipalInertiaLocalFrame(this.handle))}effectiveWorldInvInertiaSqrt(){return SdpMatrix3Ops.fromRaw(this.rawSet.rbEffectiveWorldInvInertiaSqrt(this.handle))}effectiveAngularInertia(){return SdpMatrix3Ops.fromRaw(this.rawSet.rbEffectiveAngularInertia(this.handle))}sleep(){this.rawSet.rbSleep(this.handle)}wakeUp(){this.rawSet.rbWakeUp(this.handle)}isCcdEnabled(){return this.rawSet.rbIsCcdEnabled(this.handle)}numColliders(){return this.rawSet.rbNumColliders(this.handle)}collider(t){return this.colliderSet.get(this.rawSet.rbCollider(this.handle,t))}setEnabled(t){this.rawSet.rbSetEnabled(this.handle,t)}isEnabled(){return this.rawSet.rbIsEnabled(this.handle)}bodyType(){return this.rawSet.rbBodyType(this.handle)}setBodyType(t,e){return this.rawSet.rbSetBodyType(this.handle,t,e)}isSleeping(){return this.rawSet.rbIsSleeping(this.handle)}isMoving(){return this.rawSet.rbIsMoving(this.handle)}isFixed(){return this.rawSet.rbIsFixed(this.handle)}isKinematic(){return this.rawSet.rbIsKinematic(this.handle)}isDynamic(){return this.rawSet.rbIsDynamic(this.handle)}linearDamping(){return this.rawSet.rbLinearDamping(this.handle)}angularDamping(){return this.rawSet.rbAngularDamping(this.handle)}setLinearDamping(t){this.rawSet.rbSetLinearDamping(this.handle,t)}recomputeMassPropertiesFromColliders(){this.rawSet.rbRecomputeMassPropertiesFromColliders(this.handle,this.colliderSet.raw)}setAdditionalMass(t,e){this.rawSet.rbSetAdditionalMass(this.handle,t,e)}setAdditionalMassProperties(t,e,i,r,s){let a=VectorOps.intoRaw(e),n=VectorOps.intoRaw(i),o=RotationOps.intoRaw(r);this.rawSet.rbSetAdditionalMassProperties(this.handle,t,a,n,o,s),a.free(),n.free(),o.free()}setAngularDamping(t){this.rawSet.rbSetAngularDamping(this.handle,t)}resetForces(t){this.rawSet.rbResetForces(this.handle,t)}resetTorques(t){this.rawSet.rbResetTorques(this.handle,t)}addForce(t,e){const i=VectorOps.intoRaw(t);this.rawSet.rbAddForce(this.handle,i,e),i.free()}applyImpulse(t,e){const i=VectorOps.intoRaw(t);this.rawSet.rbApplyImpulse(this.handle,i,e),i.free()}addTorque(t,e){const i=VectorOps.intoRaw(t);this.rawSet.rbAddTorque(this.handle,i,e),i.free()}applyTorqueImpulse(t,e){const i=VectorOps.intoRaw(t);this.rawSet.rbApplyTorqueImpulse(this.handle,i,e),i.free()}addForceAtPoint(t,e,i){const r=VectorOps.intoRaw(t),s=VectorOps.intoRaw(e);this.rawSet.rbAddForceAtPoint(this.handle,r,s,i),r.free(),s.free()}applyImpulseAtPoint(t,e,i){const r=VectorOps.intoRaw(t),s=VectorOps.intoRaw(e);this.rawSet.rbApplyImpulseAtPoint(this.handle,r,s,i),r.free(),s.free()}userForce(){return VectorOps.fromRaw(this.rawSet.rbUserForce(this.handle))}userTorque(){return VectorOps.fromRaw(this.rawSet.rbUserTorque(this.handle))}}export class RigidBodyDesc{constructor(t){this.enabled=!0,this.status=t,this.translation=VectorOps.zeros(),this.rotation=RotationOps.identity(),this.gravityScale=1,this.linvel=VectorOps.zeros(),this.mass=0,this.massOnly=!1,this.centerOfMass=VectorOps.zeros(),this.translationsEnabledX=!0,this.translationsEnabledY=!0,this.angvel=VectorOps.zeros(),this.principalAngularInertia=VectorOps.zeros(),this.angularInertiaLocalFrame=RotationOps.identity(),this.translationsEnabledZ=!0,this.rotationsEnabledX=!0,this.rotationsEnabledY=!0,this.rotationsEnabledZ=!0,this.linearDamping=0,this.angularDamping=0,this.canSleep=!0,this.sleeping=!1,this.ccdEnabled=!1,this.softCcdPrediction=0,this.dominanceGroup=0,this.additionalSolverIterations=0}static dynamic(){return new RigidBodyDesc(RigidBodyType.Dynamic)}static kinematicPositionBased(){return new RigidBodyDesc(RigidBodyType.KinematicPositionBased)}static kinematicVelocityBased(){return new RigidBodyDesc(RigidBodyType.KinematicVelocityBased)}static fixed(){return new RigidBodyDesc(RigidBodyType.Fixed)}static newDynamic(){return new RigidBodyDesc(RigidBodyType.Dynamic)}static newKinematicPositionBased(){return new RigidBodyDesc(RigidBodyType.KinematicPositionBased)}static newKinematicVelocityBased(){return new RigidBodyDesc(RigidBodyType.KinematicVelocityBased)}static newStatic(){return new RigidBodyDesc(RigidBodyType.Fixed)}setDominanceGroup(t){return this.dominanceGroup=t,this}setAdditionalSolverIterations(t){return this.additionalSolverIterations=t,this}setEnabled(t){return this.enabled=t,this}setTranslation(t,e,i){if("number"!=typeof t||"number"!=typeof e||"number"!=typeof i)throw TypeError("The translation components must be numbers.");return this.translation={x:t,y:e,z:i},this}setRotation(t){return RotationOps.copy(this.rotation,t),this}setGravityScale(t){return this.gravityScale=t,this}setAdditionalMass(t){return this.mass=t,this.massOnly=!0,this}setLinvel(t,e,i){if("number"!=typeof t||"number"!=typeof e||"number"!=typeof i)throw TypeError("The linvel components must be numbers.");return this.linvel={x:t,y:e,z:i},this}setAngvel(t){return VectorOps.copy(this.angvel,t),this}setAdditionalMassProperties(t,e,i,r){return this.mass=t,VectorOps.copy(this.centerOfMass,e),VectorOps.copy(this.principalAngularInertia,i),RotationOps.copy(this.angularInertiaLocalFrame,r),this.massOnly=!1,this}enabledTranslations(t,e,i){return this.translationsEnabledX=t,this.translationsEnabledY=e,this.translationsEnabledZ=i,this}restrictTranslations(t,e,i){return this.enabledTranslations(t,e,i)}lockTranslations(){return this.enabledTranslations(!1,!1,!1)}enabledRotations(t,e,i){return this.rotationsEnabledX=t,this.rotationsEnabledY=e,this.rotationsEnabledZ=i,this}restrictRotations(t,e,i){return this.enabledRotations(t,e,i)}lockRotations(){return this.restrictRotations(!1,!1,!1)}setLinearDamping(t){return this.linearDamping=t,this}setAngularDamping(t){return this.angularDamping=t,this}setCanSleep(t){return this.canSleep=t,this}setSleeping(t){return this.sleeping=t,this}setCcdEnabled(t){return this.ccdEnabled=t,this}setSoftCcdPrediction(t){return this.softCcdPrediction=t,this}setUserData(t){return this.userData=t,this}}